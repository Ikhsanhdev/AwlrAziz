function _regenerator(){var y,e="function"==typeof Symbol?Symbol:{},t=e.iterator||"@@iterator",r=e.toStringTag||"@@toStringTag";function n(e,t,r,n){var a,o,i,l,c,s,u,f,p,t=t&&t.prototype instanceof m?t:m,t=Object.create(t.prototype);return _regeneratorDefine2(t,"_invoke",(a=e,o=r,u=n||[],f=!1,p={p:s=0,n:0,v:y,a:d,f:d.bind(y,4),d:function(e,t){return i=e,l=0,c=y,p.n=t,g}},function(e,t,r){if(1<s)throw TypeError("Generator is already running");for(f&&1===t&&d(t,r),l=t,c=r;(b=l<2?y:c)||!f;){i||(l?l<3?(1<l&&(p.n=-1),d(l,c)):p.n=c:p.v=c);try{if(s=2,i){if(b=i[e=l?e:"next"]){if(!(b=b.call(i,c)))throw TypeError("iterator result is not an object");if(!b.done)return b;c=b.value,l<2&&(l=0)}else 1===l&&(b=i.return)&&b.call(i),l<2&&(c=TypeError("The iterator does not provide a '"+e+"' method"),l=1);i=y}else if((b=(f=p.n<0)?c:a.call(o,p))!==g)break}catch(e){i=y,l=1,c=e}finally{s=1}}return{value:b,done:f}}),!0),t;function d(e,t){for(l=e,c=t,b=0;!f&&s&&!r&&b<u.length;b++){var r,n=u[b],a=p.p,o=n[2];3<e?(r=o===t)&&(c=n[(l=n[4])?5:l=3],n[4]=n[5]=y):n[0]<=a&&((r=e<2&&a<n[1])?(l=0,p.v=t,p.n=n[1]):a<o&&(r=e<3||n[0]>t||o<t)&&(n[4]=e,n[5]=t,p.n=o,l=0))}if(r||1<e)return g;throw f=!0,t}}var g={};function m(){}function a(){}function o(){}var b=Object.getPrototypeOf,e=[][t]?b(b([][t]())):(_regeneratorDefine2(b={},t,function(){return this}),b),i=o.prototype=m.prototype=Object.create(e);function l(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,_regeneratorDefine2(e,r,"GeneratorFunction")),e.prototype=Object.create(i),e}return _regeneratorDefine2(i,"constructor",a.prototype=o),_regeneratorDefine2(o,"constructor",a),_regeneratorDefine2(o,r,a.displayName="GeneratorFunction"),_regeneratorDefine2(i),_regeneratorDefine2(i,r,"Generator"),_regeneratorDefine2(i,t,function(){return this}),_regeneratorDefine2(i,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:n,m:l}})()}function _regeneratorDefine2(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(_regeneratorDefine2=function(e,t,r,n){t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:((n=function(t,r){_regeneratorDefine2(e,t,function(e){return this._invoke(t,r,e)})})("next",0),n("throw",1),n("return",2))})(e,t,r,n)}function asyncGeneratorStep(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function _asyncToGenerator(l){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=l.apply(e,i);function a(e){asyncGeneratorStep(n,t,r,a,o,"next",e)}function o(e){asyncGeneratorStep(n,t,r,a,o,"throw",e)}a(void 0)})}}function _createForOfIteratorHelper(e,t){var r,n,a,o,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return a=!(n=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return n=e.done,e},e:function(e){a=!0,r=e},f:function(){try{n||null==i.return||i.return()}finally{if(a)throw r}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function initMap(){var e={lat:-6.9175,lng:107.6191},i=new google.maps.Map(document.getElementById("map"),{zoom:9,center:e,gestureHandling:"greedy",mapTypeId:google.maps.MapTypeId.HYBRID,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_LEFT},styles:[{featureType:"administrative.locality",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"labels",stylers:[{visibility:"on"}]}]});(new google.maps.Geocoder).geocode({location:e},function(e,t){if("OK"===t&&e[0]){var r,n="",a=_createForOfIteratorHelper(e[0].address_components);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.types.includes("administrative_area_level_1")){n=o.long_name;break}}}catch(e){a.e(e)}finally{a.f()}new google.maps.InfoWindow({content:"<strong>".concat(n,"</strong>")}).open(i)}})}function loadAwlrPanel(){return _loadAwlrPanel.apply(this,arguments)}function _loadAwlrPanel(){return(_loadAwlrPanel=_asyncToGenerator(_regenerator().m(function e(){var t,r;return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,fetch("/Home/GetLatestReading");case 1:if((t=e.v).ok){e.n=2;break}throw new Error("Gagal memuat data");case 2:return e.n=3,t.json();case 3:r=e.v,r='<div class="col-md-4 mb-3">\n                <h5>Nama Pos:</h5>\n                <p class="mb-1 fw-semibold">'.concat(r.name||"-",'</p>\n            </div>\n            <div class="col-md-4 mb-3">\n                <h5>Device:</h5>\n                <p class="mb-1 fw-semibold">').concat(r.brand_name||"-",' <span class="badge bg-warning text-dark">').concat(r.device_id||"-",'</span></p>\n            </div>\n            <div class="col-md-4 mb-3">\n                <h5>Tinggi Muka Air (TMA):</h5>\n                <p class="mb-1 text-primary fw-semibold">').concat(parseFloat(r.water_level).toFixed(2),' cm</p>\n            </div>\n            <div class="col-md-6 mb-3">\n                <h5>Status:</h5>\n                <span class="badge ').concat(getStatusBadgeClass(r.warning_status),' text-dark">').concat(r.warning_status||"-",'</span>\n            </div>\n            <div class="col-md-6 mb-2">\n                <h5>Waktu Pengukuran:</h5>\n                <p class="mb-0 text-muted">').concat(formatDate(r.reading_at),"</p>\n            </div>"),document.getElementById("info-panel").innerHTML=r,e.n=5;break;case 4:e.p=4,r=e.v,console.error("Error:",r),document.getElementById("info-panel").innerHTML='<p class="text-danger">Gagal memuat data.</p>';case 5:return e.a(2)}},e,null,[[0,4]])}))).apply(this,arguments)}function getStatusBadgeClass(e){switch((e||"").toLowerCase()){case"normal":return"bg-success text-dark";case"siaga 1":return"bg-danger text-dark";case"siaga 2":return"bg-orange";case"siaga 3":return"bg-warning";default:return"bg-secondary"}}function formatDate(e){var t;return e?(t=(e=new Date(e)).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",timeZone:"Asia/Jakarta"}),e=e.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Jakarta"}).replace(".",":"),"".concat(t," ").concat(e," WIB")):"-"}$(document).ready(function(){Highcharts.chart("chartTMA",{chart:{type:"line"},title:{text:""},xAxis:{categories:["01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00"],title:{text:"Jam"}},yAxis:{title:{text:"TMA (m)"},plotLines:[{value:135,color:"orange",dashStyle:"ShortDash",width:2,label:{text:"Batas Siaga",align:"right",style:{color:"orange",fontWeight:"bold"}}}]},series:[{name:"TMA",data:[134,134.1,134.2,134.4,134.3,134.6,134.8,134.9,135.1,135.3],color:"#007bff"}],credits:{enabled:!1}}),loadAwlrPanel()});