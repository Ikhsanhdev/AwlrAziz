!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var o in a)("object"==typeof exports?exports:e)[o]=a[o]}}(self,()=>(()=>{moment.locale("id");var e,t=($.ajax({url:"/Home/GetLastReadingDate?deviceId=MAA1",type:"GET",async:!1,success:function(t){var a=moment.parseZone(t.lastReading);a.hour(),e=a.format("YYYY-MM-DD")},error:function(t,a,o){console.error("Error:",a,o),e=null}}),e).lastReading,a=t?moment(t).format("DD MMMM YYYY"):moment().format("DD MMMM YYYY"),o=t?moment(t).format("YYYY-MM-DD"):moment().format("YYYY-MM-DD");function n(e,t,a){var o=[{title:"Tanggal Baca",data:"readingAt",class:"text-center",render:function(e){return moment(e).locale("id").format("DD MMMM YYYY")}},{title:"Jam",data:"readingAt",class:"text-center",render:function(e){return moment.parseZone(e).format("HH:mm")}},{title:"Tinggi Muka Air (cm)",data:"waterLevel",class:"text-center",render:function(e){return"".concat(e.toFixed(2)," cm")}}];$.fn.DataTable.isDataTable("#table-telemetri")&&$("#table-telemetri").DataTable().clear().destroy(),$("#table-telemetri").DataTable({dom:"lrtip",scrollY:"400px",processing:!0,serverSide:!1,scrollCollapse:!0,paging:!0,ajax:{url:"/Home/GetDataTableAwlr?periode=".concat(e,"&periodEnd=").concat(t),type:"GET",dataSrc:""},columns:o,responsive:!0,language:{url:"//cdn.datatables.net/plug-ins/1.13.4/i18n/id.json"},order:[[0,"desc"]],pageLength:10,initComplete:function(){a&&"function"==typeof a&&a()}})}function r(e,t){var a,o=moment(e),n=moment(t).endOf("day"),r=$("#table-telemetri").DataTable().rows().data().toArray(),i=[];r.forEach(function(e){var t=moment.parseZone(e.readingAt);t.isBetween(o,n,null,"[]")&&i.push([t.valueOf(),parseFloat(e.waterLevel)])}),i.sort(function(e,t){return e[0]-t[0]}),a=e==t?"Periode: ".concat(moment(e).locale("id").format("DD MMMM YYYY")):"Periode: ".concat(moment(e).locale("id").format("DD MMMM YYYY")," - ").concat(moment(t).locale("id").format("DD MMMM YYYY")),Highcharts.stockChart("container",{chart:{type:"areaspline",zoomType:"x",spacingTop:20,spacingBottom:20,scrollablePlotArea:{minWidth:1200,scrollPositionX:0}},navigation:{buttonOptions:{enabled:!1}},rangeSelector:{enabled:!1},title:{text:"Grafik Tinggi Muka Air",style:{fontSize:"16px",fontWeight:"bold"}},subtitle:{text:a,style:{fontSize:"13px",color:"#666"}},xAxis:{type:"datetime",title:{text:"Tanggal"},labels:{format:"{value:%d %b %Y %H:%M}",rotation:-45,align:"right"}},yAxis:{title:{text:"Tinggi Muka Air (cm)"},opposite:!1,labels:{format:"{value} cm",style:{fontSize:"12px"}},gridLineDashStyle:"Dash",lineWidth:1,lineColor:"#999",tickColor:"#999"},tooltip:{shared:!0,useHTML:!0,formatter:function(){var e="<b>".concat(Highcharts.dateFormat("%A, %d %B %Y %H:%M",this.x),"</b><br/>");return this.points.forEach(function(t){e+='<span style="color:'.concat(t.color,'">‚óè</span> ').concat(t.series.name,": <b>").concat(t.y.toFixed(2)," cm</b><br/>")}),e}},plotOptions:{series:{marker:{enabled:!0,radius:4},lineWidth:2,states:{hover:{lineWidth:3}}},areaspline:{fillOpacity:.3}},series:[{name:"TMA",data:i.map(function(e){return[new Date(e[0]).getTime(),e[1]]})}],credits:{enabled:!1},exporting:{enabled:!0}})}return $(document).ready(function(){document.getElementById("periode").placeholder=a,document.getElementById("periode-end").placeholder=a,document.getElementById("periode-grafik").placeholder=a,document.getElementById("periode-grafik-end").placeholder=a,flatpickr("#periode",{dateFormat:"Y-m-d",altInput:!0,altFormat:"d F Y",locale:"id",defaultDate:o,maxDate:"today",disableMobile:!0}),flatpickr("#periode-end",{dateFormat:"Y-m-d",altInput:!0,altFormat:"d F Y",locale:"id",defaultDate:o,maxDate:"today",disableMobile:!0}),flatpickr("#periode-grafik",{dateFormat:"Y-m-d",altInput:!0,altFormat:"d F Y",locale:"id",defaultDate:o,maxDate:"today",disableMobile:!0}),flatpickr("#periode-grafik-end",{dateFormat:"Y-m-d",altInput:!0,altFormat:"d F Y",locale:"id",defaultDate:o,maxDate:"today",disableMobile:!0});var e=$("#periode").val(),t=$("#periode-end").val(),i=$("#periode-grafik").val(),l=$("#periode-grafik-end").val();n(e,t,function(){r(i,l)}),$("#periode").on("change",function(){n($(this).val(),t)}),$("#periode-end").on("change",function(){var t=$(this).val();n(e,t)}),$("#periode-grafik").on("change",function(){var e=$(this).val(),t=$("#periode-grafik-end").val();n(e,t,function(){r(e,t)})}),$("#periode-grafik-end").on("change",function(){var e=$("#periode-grafik").val(),t=$(this).val();n(e,t,function(){r(e,t)})})}),{}})());